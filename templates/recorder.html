{% extends "base.html" %}

{% block title %}Record Reel - Thoxt Reels{% endblock %}

{% block content %}
<div class="recorder-container">
    <!-- Exit Button -->
    <button class="exit-btn" onclick="window.location.href='/'" data-testid="button-exit">✕</button>
    
    <!-- Video Preview -->
    <div class="video-wrapper">
        <video id="video-preview" autoplay playsinline muted data-testid="video-preview"></video>
        <canvas id="recording-canvas" style="display: none;"></canvas>
    </div>
    
    <!-- Teleprompter Overlay -->
    <div id="teleprompter-overlay" class="teleprompter-overlay" style="display: none;">
        <div class="teleprompter-content" id="teleprompter-text" data-testid="teleprompter-text">
            Your script will appear here...
        </div>
    </div>
    
    <!-- Filters Sidebar (Instagram-style) -->
    <div class="filters-sidebar" id="filters-sidebar" data-testid="filters-sidebar">
        <div class="filters-list">
            <div class="filter-item active" data-filter="none" data-testid="filter-none">
                <div class="filter-thumbnail">
                    <div class="filter-preview-thumb"></div>
                </div>
                <span>None</span>
            </div>
            <div class="filter-item" data-filter="valencia" data-testid="filter-valencia">
                <div class="filter-thumbnail valencia">
                    <div class="filter-preview-thumb"></div>
                </div>
                <span>Valencia</span>
            </div>
            <div class="filter-item" data-filter="nashville" data-testid="filter-nashville">
                <div class="filter-thumbnail nashville">
                    <div class="filter-preview-thumb"></div>
                </div>
                <span>Nashville</span>
            </div>
            <div class="filter-item" data-filter="toaster" data-testid="filter-toaster">
                <div class="filter-thumbnail toaster">
                    <div class="filter-preview-thumb"></div>
                </div>
                <span>Toaster</span>
            </div>
            <div class="filter-item" data-filter="walden" data-testid="filter-walden">
                <div class="filter-thumbnail walden">
                    <div class="filter-preview-thumb"></div>
                </div>
                <span>Walden</span>
            </div>
            <div class="filter-item" data-filter="lofi" data-testid="filter-lofi">
                <div class="filter-thumbnail lofi">
                    <div class="filter-preview-thumb"></div>
                </div>
                <span>Lo-Fi</span>
            </div>
            <div class="filter-item" data-filter="clarendon" data-testid="filter-clarendon">
                <div class="filter-thumbnail clarendon">
                    <div class="filter-preview-thumb"></div>
                </div>
                <span>Clarendon</span>
            </div>
            <div class="filter-item" data-filter="gingham" data-testid="filter-gingham">
                <div class="filter-thumbnail gingham">
                    <div class="filter-preview-thumb"></div>
                </div>
                <span>Gingham</span>
            </div>
        </div>
    </div>
    
    <!-- Controls -->
    <div class="controls">
        <div class="control-row">
            <button id="mirror-btn" class="control-btn" data-testid="button-mirror">
                ⇄ Mirror
            </button>
            <button id="teleprompter-btn" class="control-btn" data-testid="button-teleprompter">
                ≡ Script
            </button>
        </div>
        
        <div class="recording-controls">
            <button id="record-btn" class="record-btn" data-testid="button-record">
                <span class="record-icon">●</span> Record
            </button>
            <button id="stop-btn" class="stop-btn" style="display: none;" data-testid="button-stop">
                <span class="stop-icon">■</span> Stop
            </button>
        </div>
        
        <div class="timer" id="timer" style="display: none;" data-testid="text-timer">00:00</div>
    </div>
    
    <!-- Save Modal -->
    <div id="save-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>Save Your Reel</h2>
            <input type="text" id="reel-title" placeholder="Enter title..." value="My Reel" data-testid="input-reel-title">
            <div class="modal-actions">
                <button id="save-reel-btn" class="btn-primary" data-testid="button-save-reel">Save</button>
                <button id="cancel-save-btn" class="btn-secondary" data-testid="button-cancel-save">Cancel</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/recorder.js"></script>
{% endblock %}
